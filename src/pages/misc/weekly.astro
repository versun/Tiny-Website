---
import SubPage from "../../layouts/SubPage.astro";

const weekly_posts = (await Astro.glob('../weekly/*.{md,mdx}')).filter((post) => !post.frontmatter.draft).sort(
	(a, b) => new Date(b.frontmatter.created).valueOf() - new Date(a.frontmatter.created).valueOf()
);
---
<SubPage title="Weekly">
  <ul>
    {weekly_posts.map((post) => (
      <li>
        <time datetime={post.frontmatter.created}>
          {new Date(post.frontmatter.created).toLocaleDateString('zh-cn', {
            year: 'numeric',
            month: '2-digit',
            day: '2-digit',
          })}
        </time>
        <a href={post.url}>{post.frontmatter.title}</a>
      </li>
    ))}
  </ul>
</SubPage>
